---
title: 'Vite Plugin Static Copy: Effortlessly Manage Static Assets in Your Vite Projects'
date: '2023-11-20'
lastmod: '2024-01-26'
tags:
  [
    'vite',
    'vite plugin',
    'static assets',
    'copy files',
    'build process',
    'frontend development',
    'asset management',
    'javascript',
  ]
draft: false
summary: 'Learn how to use vite-plugin-static-copy to easily copy static assets into your Vite build output directory. Simplify your asset management workflow with practical examples and configuration tips.'
authors: ['default']
---

# Vite Plugin Static Copy: Effortlessly Manage Static Assets in Your Vite Projects

Vite is a blazing-fast build tool and development server that's revolutionizing the way we build modern web applications. However, Vite's optimized build process sometimes requires a little help when it comes to managing static assets like images, fonts, or pre-built files. That's where `vite-plugin-static-copy` comes in. This plugin simplifies the process of copying these static assets directly into your Vite build output directory, ensuring they're readily available when your application is deployed.

This comprehensive guide will walk you through everything you need to know about `vite-plugin-static-copy`, from installation and basic usage to advanced configuration options and troubleshooting. We'll explore practical examples to demonstrate how to seamlessly integrate it into your Vite projects.

## Why Use `vite-plugin-static-copy`?

Vite typically handles assets imported directly in your code. But what about files that aren't imported but still needed in the build output? Consider these scenarios:

- **Legacy Assets:** You might have older files (images, documents) that you don't want to refactor into your component imports.
- **Third-Party Libraries:** Some libraries rely on specific directory structures for assets.
- **Configuration Files:** You might need to copy configuration files (.htaccess, robots.txt) to the root of your build directory.
- **Media Files:** You have a large collection of images, videos, or audio files you want to include in your project.
- **Generated Content:** Content generated by scripts or other tools that needs to be included in the build output.

Without a plugin like `vite-plugin-static-copy`, you'd likely resort to manual copying, which is prone to errors and adds extra steps to your build process. `vite-plugin-static-copy` automates this process, making your workflow cleaner and more efficient.

## Installation

First, install the plugin using your favorite package manager.

```plaintext
npm install vite-plugin-static-copy --save-dev
# or
yarn add vite-plugin-static-copy --dev
# or
pnpm add vite-plugin-static-copy --save-dev
```

## Basic Usage: Copying a Single File

Let's start with a simple example: copying a single `favicon.ico` file to your `dist` directory.

1.  **Configure `vite.config.js` (or `vite.config.ts`):**

    ```plaintext
    // vite.config.js / vite.config.ts
    import { defineConfig } from 'vite'
    import { viteStaticCopy } from 'vite-plugin-static-copy'

    export default defineConfig({
      plugins: [
        viteStaticCopy({
          targets: [
            {
              src: 'public/favicon.ico', // Path to the source file
              dest: './', // Directory within the output directory (dist) to copy to.  '.' means root.
            },
          ],
        }),
      ],
    })
    ```

2.  **Create the `favicon.ico` file:** Place a `favicon.ico` file in your `public` directory (or any directory specified in the `src` property).

3.  **Run your Vite build:** `npm run build` or `yarn build`

After the build is complete, you'll find the `favicon.ico` file in your `dist` directory (or whatever your Vite `build.outDir` is configured to).

## Copying Multiple Files and Directories

`vite-plugin-static-copy` is capable of copying multiple files and entire directories. Let's extend our example to include an `images` directory containing several images.

1.  **Modify `vite.config.js`:**

    ```plaintext
    // vite.config.js / vite.config.ts
    import { defineConfig } from 'vite'
    import { viteStaticCopy } from 'vite-plugin-static-copy'
    import { resolve } from 'path'

    export default defineConfig({
      plugins: [
        viteStaticCopy({
          targets: [
            {
              src: 'public/favicon.ico',
              dest: './',
            },
            {
              src: 'public/images', // Path to the source directory
              dest: 'assets', // Directory within 'dist' to copy the images to.
            },
          ],
        }),
      ],
    })
    ```

2.  **Create the `images` directory:** Create a directory named `images` inside your `public` directory and populate it with some image files (e.g., `logo.png`, `banner.jpg`).

3.  **Run your Vite build:** `npm run build`

Now, after the build, you'll find the `favicon.ico` file in the `dist` directory, and the entire `images` directory (with all its contents) will be copied to the `dist/assets` directory.

## Advanced Configuration Options

`vite-plugin-static-copy` offers several configuration options to fine-tune the copying process:

- **`src` (Required):** Specifies the path to the source file or directory to copy. This can be an absolute or relative path.
- **`dest` (Required):** Specifies the destination directory within the Vite build output directory (`dist`) where the file(s) should be copied. A value of `'./'` copies to the root.
- **`rename` (Optional):** Allows you to rename the file or directory being copied. This can be a string (for a simple rename) or a function for more complex renaming logic.
- **`transform` (Optional):** Enables you to transform the content of a file during the copy process. This is useful for things like minifying JavaScript or optimizing images. Takes a function that receives the file content as a Buffer and returns the transformed Buffer.
- **`filter` (Optional):** Allows you to specify a function that determines whether a file should be copied. Useful for selectively copying files from a directory. Takes a function that receives the file path and returns a boolean.
- **`dereference` (Optional):** Controls whether symbolic links are followed during directory copying. Defaults to `false`. Set to `true` to follow symlinks.
- **`globOptions` (Optional):** An object passed directly to the `fast-glob` library to customize the globbing behavior. Allows fine-grained control over file matching.

### Renaming Files

Let's say you want to rename `favicon.ico` to `my-favicon.ico` during the copy process.

```plaintext
// vite.config.js / vite.config.ts
import { defineConfig } from 'vite'
import { viteStaticCopy } from 'vite-plugin-static-copy'

export default defineConfig({
  plugins: [
    viteStaticCopy({
      targets: [
        {
          src: 'public/favicon.ico',
          dest: './',
          rename: 'my-favicon.ico', // Rename the file
        },
      ],
    }),
  ],
})
```

You can also use a function to rename the file dynamically:

```plaintext
// vite.config.js / vite.config.ts
import { defineConfig } from 'vite'
import { viteStaticCopy } from 'vite-plugin-static-copy'
import path from 'path'

export default defineConfig({
  plugins: [
    viteStaticCopy({
      targets: [
        {
          src: 'public/images',
          dest: 'assets',
          rename: (name, extension, fullPath) => {
            // Example: Prefix all image names with 'img-'
            return `img-${name}${extension ? '.' + extension : ''}`
          },
        },
      ],
    }),
  ],
})
```

### Transforming File Content

The `transform` option allows you to modify the content of a file before it's copied. This can be useful for minifying JavaScript, optimizing images, or performing other transformations.

**Example: Minifying a JavaScript file:**

```plaintext
// vite.config.js / vite.config.ts
import { defineConfig } from 'vite'
import { viteStaticCopy } from 'vite-plugin-static-copy'
import { minify } from 'terser'
import fs from 'fs/promises'

export default defineConfig({
  plugins: [
    viteStaticCopy({
      targets: [
        {
          src: 'public/js/script.js',
          dest: 'js',
          transform: async (content, filePath) => {
            const result = await minify(content.toString(), {
              compress: true,
              mangle: true,
            })
            return result.code
          },
        },
      ],
    }),
  ],
})
```

**Important:** Ensure you have the necessary dependencies installed (e.g., `terser` in this example).

### Filtering Files

The `filter` option lets you selectively copy files based on a condition.

**Example: Copying only `.jpg` and `.png` files from the `images` directory:**

```plaintext
// vite.config.js / vite.config.ts
import { defineConfig } from 'vite'
import { viteStaticCopy } from 'vite-plugin-static-copy'

export default defineConfig({
  plugins: [
    viteStaticCopy({
      targets: [
        {
          src: 'public/images',
          dest: 'assets',
          filter: (filePath) => {
            return filePath.endsWith('.jpg') || filePath.endsWith('.png')
          },
        },
      ],
    }),
  ],
})
```

## Real-World Examples

Here are a few more practical examples of how `vite-plugin-static-copy` can be used:

- **Copying `.htaccess` or `robots.txt` to the root directory:**

  ```plaintext
  // vite.config.js / vite.config.ts
  import { defineConfig } from 'vite'
  import { viteStaticCopy } from 'vite-plugin-static-copy'

  export default defineConfig({
    plugins: [
      viteStaticCopy({
        targets: [
          { src: 'public/.htaccess', dest: './' },
          { src: 'public/robots.txt', dest: './' },
        ],
      }),
    ],
  })
  ```

- **Distributing pre-built WebAssembly modules:**

  ```plaintext
  // vite.config.js / vite.config.ts
  import { defineConfig } from 'vite'
  import { viteStaticCopy } from 'vite-plugin-static-copy'

  export default defineConfig({
    plugins: [
      viteStaticCopy({
        targets: [
          { src: 'wasm', dest: 'wasm' }, //Copy all `.wasm` from the wasm folder to the dist/wasm folder
        ],
      }),
    ],
  })
  ```

- **Copying font files:**

  ```plaintext
  // vite.config.js / vite.config.ts
  import { defineConfig } from 'vite'
  import { viteStaticCopy } from 'vite-plugin-static-copy'

  export default defineConfig({
    plugins: [
      viteStaticCopy({
        targets: [
          { src: 'public/fonts', dest: 'fonts' }, // Copies all font files to dist/fonts
        ],
      }),
    ],
  })
  ```

## Troubleshooting

Here are some common issues and solutions:

- **Files are not being copied:**
  - Double-check the `src` and `dest` paths in your configuration. Ensure the `src` path is correct and that the destination directory exists within your `dist` folder.
  - Verify that you're running the Vite build (`npm run build` or `yarn build`). The plugin only works during the build process.
  - Make sure the `vite-plugin-static-copy` plugin is correctly included in your `vite.config.js` file.
- **Files are being copied to the wrong location:**
  - Carefully review the `dest` path. It's relative to your Vite `build.outDir` setting (usually `dist`).
- **Transformations are not working:**
  - Ensure that you have the necessary dependencies installed for the transformation you're performing (e.g., `terser` for minification).
  - Check for errors in your transformation logic. Use `console.log` statements to debug.
  - Make sure the `transform` function is returning a Buffer (or a string that can be converted to a Buffer).
- **File permissions issues:**
  - On some systems, you might encounter file permission errors. Try running the build with elevated privileges (e.g., using `sudo`). However, be cautious when using `sudo` and consider the security implications. Ensure your source files have correct permissions.

## Conclusion

`vite-plugin-static-copy` is a valuable tool for streamlining asset management in your Vite projects. By automating the process of copying static files and directories, it simplifies your build process and ensures that all your necessary assets are readily available when your application is deployed. With its flexible configuration options, you can tailor the plugin to meet the specific needs of your project, making it an indispensable addition to your Vite development workflow. Experiment with the examples provided and explore the advanced options to unlock the full potential of this powerful plugin!
