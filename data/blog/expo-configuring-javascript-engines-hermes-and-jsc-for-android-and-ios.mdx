---
title: 'Expo: Configuring JavaScript Engines (Hermes & JSC) for Android & iOS'
date: '2024-10-27'
lastmod: '2024-10-27'
tags: ['expo', 'react-native', 'javascript engine', 'hermes', 'jsc', 'android', 'ios', 'performance', 'configuration']
draft: false
summary: 'Optimize your Expo app performance by configuring JavaScript engines like Hermes (default) and JSC for Android and iOS. This guide covers setup, troubleshooting, and best practices.'
authors: ['default']
---

# Expo: Configuring JavaScript Engines (Hermes & JSC) for Android & iOS

Choosing the right JavaScript engine can significantly impact your Expo app's performance.  This guide provides a comprehensive overview of configuring JavaScript engines, specifically Hermes and JavaScriptCore (JSC), for both Android and iOS platforms in your Expo project. We'll explore the benefits of each engine, walk through the configuration process, and address common troubleshooting issues.

## Understanding JavaScript Engines in React Native/Expo

React Native, and by extension Expo, relies on a JavaScript engine to execute your application's code.  The engine is responsible for interpreting and running the JavaScript you write, translating it into instructions the native platform can understand.  The two primary contenders are:

*   **Hermes:** A JavaScript engine optimized for React Native, developed by Facebook (Meta). It focuses on smaller app size, reduced memory usage, and faster startup times. It does this by performing ahead-of-time (AOT) compilation of JavaScript to bytecode.

*   **JavaScriptCore (JSC):** The JavaScript engine used by Safari on iOS and macOS. It's the default engine for iOS React Native apps if Hermes isn't explicitly enabled. On Android, JSC provides backward compatibility options and can sometimes be a fallback when Hermes has issues.

## Why Choose Hermes?

Hermes is generally the recommended engine for most React Native/Expo projects due to its performance benefits:

*   **Faster Startup Times:**  Hermes' AOT compilation leads to quicker app launches.
*   **Smaller App Size:** The bytecode generated by Hermes is typically more compact than JavaScript source code, reducing the overall app size.
*   **Reduced Memory Usage:** Hermes is designed to be memory-efficient, which can be particularly beneficial on resource-constrained devices.

## When Might You Consider JSC?

While Hermes is excellent, there are situations where JSC might be preferred:

*   **Compatibility Issues:**  Occasionally, Hermes might encounter compatibility issues with certain third-party libraries or native modules.  In these cases, temporarily switching back to JSC can resolve the problem.  However, it's generally best to report the issue to the library maintainers or the React Native community so a proper fix can be implemented for Hermes.
*   **Debugging/Profiling Specific to JSC:**  If you need to debug or profile JavaScript performance in a JSC environment (perhaps to compare against Hermes), you'll need to use JSC.

## Enabling/Disabling Hermes in Your Expo Project

Expo simplifies the process of configuring the JavaScript engine.  You can manage Hermes through the `app.json` (or `app.config.js`) file.

### Step 1: Locate your `app.json` or `app.config.js`

This file resides at the root of your Expo project.

### Step 2: Configure the `jsEngine` property

Add or modify the `jsEngine` property within the `expo` configuration section.

```json
{
  "expo": {
    "name": "MyAwesomeApp",
    "slug": "my-awesome-app",
    // ... other configurations ...
    "jsEngine": "hermes" // or "jsc"
  }
}
```

or in `app.config.js`:

```javascript
export default {
  expo: {
    name: 'MyAwesomeApp',
    slug: 'my-awesome-app',
    // ... other configurations ...
    jsEngine: 'hermes', // or 'jsc'
  },
};
```

*   **`"jsEngine": "hermes"`:** Enables Hermes (recommended).
*   **`"jsEngine": "jsc"`:**  Enables JavaScriptCore.

**Important:** After changing the `jsEngine`, you **must** rebuild your app. This ensures the change is properly applied.

```bash
npx expo prebuild --clean
npx expo run:android # or npx expo run:ios
```

The `--clean` flag is crucial because it ensures that any cached builds are removed, forcing a fresh build with the new JavaScript engine.

## Verifying the JavaScript Engine

After rebuilding your app, you can verify which JavaScript engine is running.

### Android: Using Logcat

1.  Run your app on an Android device or emulator.
2.  Open Android Studio and use Logcat (or a similar logging tool).
3.  Filter the logs by `ReactNativeJS`.
4.  Look for a log message similar to:

    ```
    ReactNativeJS: Running application "MyAwesomeApp" with appParams: {"initialProps":{}}. __DEV__ === true, development-level warning are ON, performance optimizations are OFF
    ```

    **If Hermes is enabled:** You'll see output like this:

    ```
    ReactNativeJS: Running application "MyAwesomeApp" with appParams: {"initialProps":{}}. __DEV__ === true, development-level warning are ON, performance optimizations are OFF, Hermes is ENABLED
    ```

    **If JSC is enabled:**  The `Hermes is ENABLED` line will be missing.

### iOS: Using the Xcode Console

1.  Run your app on an iOS device or simulator.
2.  Open Xcode and view the console.
3.  Look for a similar log message indicating whether Hermes is enabled.  The specifics of the log message may vary slightly between React Native/Expo versions. Generally, presence of `Hermes is ENABLED` indicates Hermes is successfully running.

## Troubleshooting Common Issues

Here are some common problems you might encounter when configuring JavaScript engines and how to address them:

*   **Build Errors:**

    *   **Problem:** The build fails after changing the `jsEngine`.
    *   **Solution:** Ensure you've run `npx expo prebuild --clean` to clear cached builds.  Also, double-check your `app.json` or `app.config.js` for typos or syntax errors.  If you're using custom native modules, ensure they are compatible with the selected engine.

*   **App Crashes on Startup:**

    *   **Problem:** The app crashes immediately upon launch.
    *   **Solution:** This often indicates a compatibility issue with Hermes or JSC.  Try switching to the other engine to see if the problem resolves.  If the issue persists, investigate your JavaScript code for errors (e.g., using `console.log` or a debugger).

*   **Performance Issues:**

    *   **Problem:** The app feels slow or unresponsive.
    *   **Solution:**  Verify that Hermes is enabled (if that's your desired engine).  Profile your app's performance using React Native's built-in profiling tools or third-party profilers to identify bottlenecks.  Optimize your JavaScript code, reduce unnecessary re-renders, and use memoization techniques.

*   **Library Compatibility Issues:**

    *   **Problem:** A third-party library doesn't work correctly with Hermes.
    *   **Solution:**  Check the library's documentation or issue tracker for known compatibility issues.  Try using an older version of the library or switching to JSC as a temporary workaround.  Report the issue to the library maintainers so they can address the compatibility problem.

## Optimizing Performance Beyond the JavaScript Engine

While selecting the right JavaScript engine is crucial, remember that it's just one piece of the performance puzzle.  Here are some additional optimization strategies:

*   **Code Optimization:** Write efficient JavaScript code.  Avoid unnecessary calculations, loops, and re-renders.
*   **Image Optimization:**  Optimize images for mobile devices.  Use appropriate image formats (e.g., WebP) and compress images to reduce file size.
*   **Lazy Loading:** Load resources (e.g., images, data) only when they are needed.
*   **Memoization:**  Use memoization techniques (e.g., `React.memo`, `useMemo`) to prevent unnecessary re-renders of components.
*   **Virtualization:**  For long lists, use virtualization libraries (e.g., `FlatList`, `SectionList`) to render only the visible items.
*   **Native Modules:**  For performance-critical tasks, consider using native modules written in Java/Kotlin (Android) or Swift/Objective-C (iOS).

## Conclusion

Configuring the JavaScript engine is a fundamental aspect of optimizing your Expo application's performance.  By understanding the strengths of Hermes and JSC, and following the steps outlined in this guide, you can make informed decisions about which engine is best suited for your project. Remember to combine engine configuration with other performance optimization techniques to deliver a smooth and responsive user experience. Don't forget to prebuild your project with `--clean` every time after changing the `jsEngine` setting in your `app.json` file.