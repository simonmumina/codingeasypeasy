---
title: "Secure Your Nginx Server: How to Disable Server Version and Tokens for Enhanced Security"
date: '2024-10-26'
lastmod: '2024-10-26'
tags: ['nginx', 'security', 'server hardening', 'http headers', 'configuration', 'vulnerability', 'server version', 'server tokens']
draft: false
summary: "Learn how to disable the server version and tokens in Nginx to improve your server's security posture and prevent attackers from gathering information about your system. This guide provides step-by-step instructions and configuration examples for effectively hiding sensitive server information."
authors: ['default']
---

# Secure Your Nginx Server: How to Disable Server Version and Tokens for Enhanced Security

In today's threat landscape, minimizing the information your web server exposes is crucial for enhancing security. Nginx, a popular open-source web server, by default, includes the server version and operating system information in its HTTP response headers. This information, also known as server tokens, can be exploited by attackers to identify known vulnerabilities and target your system with specific exploits. This guide explains how to disable these server tokens and harden your Nginx server.

## Why Disable Server Version and Tokens?

Exposing server version information makes your server a more attractive target. Here's why:

*   **Vulnerability Identification:** Attackers can use the server version to identify known vulnerabilities associated with that specific version. If a vulnerability exists and your server is running a vulnerable version, it becomes an easy target.
*   **Reduced Attack Surface:**  Hiding server information reduces the attack surface by making it harder for attackers to gather information about your system. This forces them to spend more time on reconnaissance, potentially increasing the chance of detection.
*   **Defense in Depth:** Disabling server tokens is a crucial part of a defense-in-depth strategy, adding an extra layer of security on top of other measures like firewalls, intrusion detection systems, and regular security updates.
*   **Compliance Requirements:** Certain compliance standards (e.g., PCI DSS) may require you to minimize the information you expose about your infrastructure.

## How to Disable Server Version and Tokens in Nginx

There are primarily two directives in Nginx that control the exposure of server information:

*   **`server_tokens`:** This directive controls whether the Nginx version is displayed in the `Server` response header.
*   **`server_name_in_redirect`:** This directive determines whether the server name is included in redirects generated by Nginx.

Let's go through the steps to disable them.

### Step 1: Locate Your Nginx Configuration File

The location of your Nginx configuration file can vary depending on your operating system and installation method. Common locations include:

*   `/etc/nginx/nginx.conf` (Main Nginx configuration)
*   `/etc/nginx/conf.d/default.conf` (Site-specific configuration)
*   `/usr/local/nginx/conf/nginx.conf` (If compiled from source)

Use the following command to find your Nginx configuration file:

```bash
nginx -t
```

This command will test the configuration and output the path to the main configuration file.

### Step 2: Edit the Nginx Configuration File

Once you've located your Nginx configuration file, open it with your favorite text editor (e.g., `nano`, `vim`, `emacs`) using `sudo`:

```bash
sudo nano /etc/nginx/nginx.conf
```

**Important:** Always back up your configuration file before making any changes.  You can do this with:

```bash
sudo cp /etc/nginx/nginx.conf /etc/nginx/nginx.conf.bak
```

### Step 3: Modify the `http` Block

Within the `http` block of your Nginx configuration file, add or modify the `server_tokens` directive:

```nginx
http {
    server_tokens off;
    # ... other configurations ...
}
```

This directive tells Nginx to suppress the server version information in the `Server` response header.

### Step 4: Optionally Modify the `server_name_in_redirect` Directive

While less critical than `server_tokens`, you might also want to disable the server name in redirects.  This is done with the `server_name_in_redirect` directive.  Add or modify it within the `http` block:

```nginx
http {
    server_tokens off;
    server_name_in_redirect off;
    # ... other configurations ...
}
```

This prevents Nginx from including the server name in automatically generated redirects.  This is useful if you have a default server block that handles requests for multiple domains and you don't want to leak the server name.

### Step 5: Configure per-server block (Optional)

While the `http` block is generally the best place to configure `server_tokens`, you can also configure it within a specific `server` block to customize the behavior for a particular virtual host:

```nginx
http {
    # ... other configurations ...

    server {
        listen 80;
        server_name example.com;
        server_tokens off; # Disable server tokens for this virtual host

        # ... other configurations ...
    }
}
```

In this scenario, only the `example.com` virtual host will have server tokens disabled.  Other virtual hosts defined in your configuration will use the `server_tokens` setting from the `http` block (or the default `on` if not explicitly set).

### Step 6: Test the Nginx Configuration

Before restarting Nginx, it's essential to test the configuration for syntax errors.  Run the following command:

```bash
sudo nginx -t
```

If the configuration is valid, you should see the following output:

```
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
```

If there are errors, carefully review the configuration file and fix any syntax problems before proceeding.

### Step 7: Restart Nginx

After successfully testing the configuration, restart Nginx to apply the changes:

```bash
sudo systemctl restart nginx
```

or

```bash
sudo service nginx restart
```

### Step 8: Verify the Changes

You can verify that the server version is no longer displayed in the `Server` response header using a variety of tools, such as `curl`, `wget`, or your browser's developer tools.

**Using `curl`:**

```bash
curl -I https://yourdomain.com
```

Examine the output. You should see the `Server` header, but it should not contain the Nginx version number.  Instead, it should simply say `nginx`.  If you're still seeing the version, double-check your configuration and ensure that you restarted Nginx.

**Example of output (with `server_tokens off`):**

```
HTTP/2 200
server: nginx
date: Sat, 26 Oct 2024 12:00:00 GMT
content-type: text/html
# ... other headers ...
```

**Example of output (with `server_tokens on` - default):**

```
HTTP/2 200
server: nginx/1.21.5
date: Sat, 26 Oct 2024 12:00:00 GMT
content-type: text/html
# ... other headers ...
```

**Using Browser Developer Tools:**

1.  Open your website in your browser.
2.  Open the browser's developer tools (usually by pressing F12).
3.  Navigate to the "Network" tab.
4.  Reload the page.
5.  Click on the request for the page.
6.  Examine the "Headers" section.
7.  Verify that the `Server` header does not include the Nginx version.

## Additional Security Considerations

While disabling server tokens is a good first step, it's essential to implement other security measures to protect your Nginx server:

*   **Keep Nginx Updated:** Regularly update Nginx to the latest version to patch security vulnerabilities.
*   **Use a Web Application Firewall (WAF):** A WAF can protect your server from a wide range of web application attacks, such as SQL injection, cross-site scripting (XSS), and cross-site request forgery (CSRF).
*   **Implement Strong Access Controls:** Restrict access to your server and configuration files to authorized users only.
*   **Use HTTPS:** Encrypt all traffic between your server and clients using HTTPS.
*   **Regular Security Audits:** Conduct regular security audits to identify and address potential vulnerabilities.
*   **Rate Limiting:** Implement rate limiting to prevent brute-force attacks and denial-of-service attacks.
*   **Harden SSL/TLS Configuration:** Use strong cipher suites and disable older, insecure protocols.

## Conclusion

Disabling server tokens in Nginx is a simple yet effective way to improve your server's security posture. By hiding the server version information, you can reduce the attack surface and make it harder for attackers to identify and exploit vulnerabilities. Remember to combine this measure with other security best practices to create a comprehensive security strategy for your Nginx server. This, coupled with regular maintenance and security updates, will significantly improve the overall security of your web infrastructure.